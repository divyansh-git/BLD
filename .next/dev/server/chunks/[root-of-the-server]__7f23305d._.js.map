{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/business-lead-generation-services/app/api/chat/route.ts"],"sourcesContent":["\r\nimport { GoogleGenAI } from \"@google/genai\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nconst API_KEY = process.env.GEMINI_API_KEY || process.env.API_KEY || '';\r\n\r\nconst ai = new GoogleGenAI({ apiKey: API_KEY });\r\n\r\nconst systemInstruction = `You are the Lead Sales Consultant for 'Business Lead Generation Service' (founded by Rohit Kumar).\r\n\r\nOur HERO offering is LinkedIn DM Outreach. We focus on high-quality 1:1 personalized conversations with decision-makers.\r\n\r\nCore Services:\r\n1. LinkedIn DM Outreach (Hero Offering): \r\n   - Pricing: $200/mo per profile for the first 2 months (introductory rate), then $350/mo from month 3 onwards.\r\n   - Philosophy: \"This ensures you test our capabilities at lowest investments.\"\r\n   - Benchmarks: 190-200 reach/mo, 30-40% acceptance, 10-15% reply rate. 3X conversion vs email.\r\n   - Tech: Sales Navigator, n8n, Scrapers.\r\n   - Precondition: Client must provide minimum LinkedIn-verified, aged profiles.\r\n2. Multi-channel Email Marketing:\r\n   - Plan A: Bulk Reachout ($400/mo). Awareness focus. 5k emails. 3 Domains.\r\n   - Plan B: Intent-Based ($600/mo). Active Buyer focus. 100-200 ICP contacts daily.\r\n   - Plan C: Agentic AI Precision ($900/mo). Hyper-personalized. n8n/Make automation.\r\n\r\nTimeline & Phases:\r\n- Phase 1: Warm-up (7 to 14 days). Infrastructure & domain health.\r\n- Phase 2: Ramp-up (20-30 days). Testing & flow establishment.\r\n- Phase 3: Performance Mode. Full volume activated after successful phase completion.\r\n\r\nSales Philosophy:\r\n- Mention our ROI achievements: Median 470% ROI in 6 months, up to 700% for some clients.\r\n- Visibility benchmarks: We've achieved 84% visibility.\r\n- Be professional, authoritative, and focused on ROI and systemized growth.\r\n- Always encourage booking a call via our calendar for a custom strategy session: https://calendar.app.google/ELJnvoQX91FPTkPe7`;\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { message, history } = await req.json();\r\n\r\n        if (!API_KEY) {\r\n            return NextResponse.json(\r\n                { error: \"Server configuration error: API Key missing\" },\r\n                { status: 500 }\r\n            );\r\n        }\r\n\r\n        // Initialize chat with history if provided, or start new\r\n        // Note: GoogleGenAI Chat session management is often stateful in the client reuse,\r\n        // but for a stateless REST API, we normally re-construct context or pass history.\r\n        // Here we'll simplify by sending the history context or just the message if it's simple.\r\n        // For a robust implementation, we should pass the full history.\r\n\r\n        // Simplest stateless approach for this migration:\r\n        const model = ai.getGenerativeModel({\r\n            model: \"gemini-1.5-flash\", // Using a stable model name, 'gemini-3-flash-preview' might need specific entitlement or updated SDK\r\n            systemInstruction: systemInstruction,\r\n        });\r\n\r\n        const chat = model.startChat({\r\n            history: history || [],\r\n        });\r\n\r\n        const result = await chat.sendMessage(message);\r\n        const response = await result.response;\r\n        const text = response.text();\r\n\r\n        return NextResponse.json({ text });\r\n    } catch (error) {\r\n        console.error(\"Gemini API Error:\", error);\r\n        return NextResponse.json(\r\n            { error: \"Failed to process request\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,cAAc,IAAI,QAAQ,GAAG,CAAC,OAAO,IAAI;AAErE,MAAM,KAAK,IAAI,4KAAW,CAAC;IAAE,QAAQ;AAAQ;AAE7C,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;+HAyBoG,CAAC;AAEzH,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAE3C,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAA8C,GACvD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,yDAAyD;QACzD,mFAAmF;QACnF,kFAAkF;QAClF,yFAAyF;QACzF,gEAAgE;QAEhE,kDAAkD;QAClD,MAAM,QAAQ,GAAG,kBAAkB,CAAC;YAChC,OAAO;YACP,mBAAmB;QACvB;QAEA,MAAM,OAAO,MAAM,SAAS,CAAC;YACzB,SAAS,WAAW,EAAE;QAC1B;QAEA,MAAM,SAAS,MAAM,KAAK,WAAW,CAAC;QACtC,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IACpC,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}